<!doctype html>
<html lang="ja">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="path_to_root" content="..">
  <script type="text/javascript" src="../theme.js"></script>
  <script type="text/javascript" src="../script.js" defer></script>
  <script type="text/javascript" src="../metadata.js" defer></script>
  <script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-9MVM0NZK9L" defer></script><script type="text/javascript" src="../gtag.js" defer></script>
  <link rel="stylesheet" href="../style.css" />
  
  <title>Java のコンパイルと実行</title>
</head>

  <body>
    <header class="site-header">
  <div class="header-inner">
    <h1 class="site-title"><a href="../index.html">Sinotcaの雑記帳</a></h1>
    <div class="header-actions">
      <button
        id="search-toggle"
        class="header-button"
        type="button"
        onclick="toggleSearchInput()"
        aria-label="Toggle search"
        aria-controls="searchbar"
        aria-expanded="false"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20" aria-hidden="true" focusable="false">
          <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
          <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z" />
        </svg>
      </button>
      <button
        id="theme-toggle"
        class="header-button"
        type="button"
        onclick="toggleTheme()"
        aria-label="Toggle color theme"
      >
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="20" height="20" aria-hidden="true" focusable="false">
          <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
          <path d="M448 256c0-106-86-192-192-192v384c106 0 192-86 192-192zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z" />
        </svg>
      </button>
    </div>
  </div>
  <form id="searchbar" class="site-search hidden" role="search" onsubmit="return false;">
    <input
      type="search"
      id="search-input"
      onkeyup="searchAndRender()"
      placeholder="Search this site"
      aria-label="Search site"
    >
    <button
      type="button"
      class="header-button search-close"
      onclick="toggleSearchInput()"
      aria-label="Close search"
    >
      &times;
    </button>
  </form>
  <div id="search-result" class="hidden"></div>
</header>

    <main>
      <div id="date">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" width="1em" height="1em" style="fill: var(--header-fg);">
          <!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
          <path d="M152 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40L64 64C28.7 64 0 92.7 0 128l0 16 0 48L0 448c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-256 0-48 0-16c0-35.3-28.7-64-64-64l-40 0 0-40c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 40L152 64l0-40zM48 192l352 0 0 256c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-256z"/>
        </svg>
        2025-09-07 ~ 2025-09-07
      </div>
      <div> <a class="tag" href="../index.html?tag=lang">lang</a> <a class="tag" href="../index.html?tag=java">java</a></div>
      <div id="toc"><ul><li><a href="#1">単一ファイルからなるプロジェクト</a></li><li><a href="#2">複数ファイルからなるプロジェクト</a></li><li><a href="#3">ライブラリ（.class）を利用する</a></li><li><a href="#4">ライブラリ（.jar）を利用する</a></li><li><a href="#5">プロジェクトを配布する</a></li></ul></div>
      <div id="main-content">
        <style>
rt { text-align: left; }
</style>
<h1 id="">Java のコンパイルと実行</h1>
<p>このエントリでは、 Java のコンパイルと実行の流れについて解説します。</p>
<h2 id="1">単一ファイルからなるプロジェクト</h2>
<p>まずは1ファイルから構成されるプロジェクトをコンパイルします。
次のようにディレクトリを作成し、 <code>Main.java</code> を配置します。</p>
<pre><code class="language-txt">sample-project/
└─ src
   └─ com/example/app/Main.java
</code></pre>
<pre><code class="language-java">// Main.java
package com.example.app;

public class Main {
    public static void main(String[] args) {
        System.out.println("Hello, Java!");
    }
}
</code></pre>
<p>コンパイルは次のコマンドで行います。</p>
<pre><code>javac <ruby>-d out<rt>出力先</rt></ruby> <ruby>src/com/example/app/Main.java<rt>エントリポイント</rt></ruby></code></pre>
<p>コンパイルの結果、出力先 (<code>out</code>) に <code>.class</code> ファイルが作成されます。</p>
<pre><code class="language-txt">sample-project/
├─ src
│  └─ com/example/app/Main.java
└─ out
   └─ com/example/app/Main.class
</code></pre>
<p>実行は次のようにします。</p>
<pre><code>java <ruby>-cp out<rt>クラスパス</rt></ruby> <ruby>com.example.app.Main<rt>エントリポイント</rt></ruby></code></pre>
<h2 id="2">複数ファイルからなるプロジェクト</h2>
<p>次は 2 ファイルから構成されるプロジェクトをコンパイルします。
次のようにディレクトリを作成し、 <code>Main.java</code> と <code>Util.java</code> を配置します。</p>
<pre><code class="language-txt">sample-project/
└─ src
   └─ com/example/
      ├─ app/Main.java
      └─ util/Util.java
</code></pre>
<pre><code class="language-java">// Util.java
package com.example.util;

public class Util {
    public static void hello() {
        System.out.println("Hello from Util!");
    }
}
</code></pre>
<pre><code class="language-java">// Main.java
package com.example.app;

import com.example.util.Util;

public class Main {
    public static void main(String[] args) {
        Util.hello();
    }
}
</code></pre>
<p>コンパイルは 2 ファイルをまとめて指定します。</p>
<pre><code>javac <ruby>-d out<rt>出力先</rt></ruby> <ruby>src/com/example/util/Util.java src/com/example/app/Main.java<rt>ソースファイル群</rt></ruby></code></pre>
<p>コンパイルの結果、出力先 (out) に .class ファイルが作成されます。</p>
<pre><code class="language-txt">sample-project/
├─ src
│  └─ com/example/
│     ├─ app/Main.java
│     └─ util/Util.java
└─ out
   └─ com/example/
      ├─ app/Main.class
      └─ util/Util.class
</code></pre>
<p>実行は次のようにします。</p>
<pre><code>java <ruby>-cp out<rt>クラスパス</rt></ruby> <ruby>com.example.app.Main<rt>エントリポイント</rt></ruby></code></pre>
<h2 id="3">ライブラリ（.class）を利用する</h2>
<p>自分で作ったライブラリを使ってみましょう。
まずは「ライブラリ」を別ディレクトリにコンパイルし、その <code>.class</code> を「アプリ」側のコンパイル・実行時クラスパスに追加します。
次のようにディレクトリを作成し、 <code>Main.java</code> と <code>Util.java</code> を配置します。</p>
<pre><code class="language-txt">sample-project/
├─ libsrc/                         ← ライブラリのソース置き場
│  └─ com/example/lib/Util.java
├─ out-lib/                        ← ライブラリの .class 出力先
│
├─ src/                            ← アプリのソース置き場
│  └─ com/example/app/Main.java
└─ out-app/                        ← アプリの .class 出力先
</code></pre>
<pre><code class="language-java">// Util.java
package com.example.lib;

public class Util {
    public static String hello(String name) {
        return "Hello, " + name + " (from Util)";
    }
}
</code></pre>
<pre><code class="language-java">// Main.java
package com.example.app;
import com.example.lib.Util;

public class Main {
    public static void main(String[] args) {
        String msg = Util.hello("Java");
        System.out.println(msg);
    }
}
</code></pre>
<p>まずはライブラリ側をコンパイルします。</p>
<pre><code class="language-sh">javac -d out-lib libsrc/com/example/lib/Util.java
</code></pre>
<p><code>out-lib/com/example/lib/Util.class</code> が生成されます。</p>
<pre><code class="language-txt">sample-project/
├─ libsrc/                         ← ライブラリのソース置き場
│  └─ com/example/lib/Util.java
├─ out-lib/                        ← ライブラリの .class 出力先
│  └─ com/example/lib/Util.class
│
├─ src/                            ← アプリのソース置き場
│  └─ com/example/app/Main.java
└─ out-app/                        ← アプリの .class 出力先
</code></pre>
<p>そして、アプリ側をコンパイルします。</p>
<pre><code>javac <ruby>-cp out-lib<rt>ライブラリのクラスパス</rt></ruby> <ruby>-d out-app<rt>アプリの出力先</rt></ruby> <ruby>src/com/example/app/Main.java<rt>アプリのソース</rt></ruby></code></pre>
<p><code>out-app/com/example/lib/Main.class</code> が生成されます。</p>
<p>結果イメージ：</p>
<pre><code class="language-txt">sample-project/
├─ libsrc/                         ← ライブラリのソース置き場
│  └─ com/example/lib/Util.java
├─ out-lib/                        ← ライブラリの .class 出力先
│  └─ com/example/lib/Util.class
│
├─ src/                            ← アプリのソース置き場
│  └─ com/example/app/Main.java
└─ out-app/                        ← アプリの .class 出力先
   └─ com/example/app/Main.class
</code></pre>
<p>実行するにはライブラリとアプリの両方をクラスパスに加えます。</p>
<pre><code>java <ruby>-cp out-app:out-lib<rt>クラスパス</rt></ruby> <ruby>com.example.app.Main<rt>エントリポイント</rt></ruby></code></pre>
<h2 id="4">ライブラリ（.jar）を利用する</h2>
<p>多くのファイルからなるライブラリを <code>.class</code> ファイルの形で配布/導入するのは手間です。
そのため <code>.jar</code> にかためて配布するのが一般的です。</p>
<p>先程と同様に <code>Util.java</code> から <code>Util.class</code> を作成した後、次のコマンドで <code>.jar</code> を作成します。</p>
<pre><code>jar <ruby>cf util.jar<rt>出力</rt></ruby> <ruby>-C out-lib .<rt>jar 化範囲</rt></ruby></code></pre>
<p>アプリのコンパイル時には <code>util.jar</code> をクラスパスに指定します。</p>
<pre><code>javac <ruby>-cp util.jar<rt>jar のパス</rt></ruby> <ruby>-d out-app<rt>アプリの出力先</rt></ruby> <ruby>src/com/example/app/Main.java<rt>アプリのソース</rt></ruby></code></pre>
<p>実行時にも <code>util.jar</code> をクラスパスに指定します。</p>
<pre><code>java <ruby>-cp out-lib:util.jar<rt>クラスパス + jar</rt></ruby> <ruby>com.example.app.Main<rt>エントリポイント</rt></ruby></code></pre>
<h2 id="5">プロジェクトを配布する</h2>
<p>アプリの配布も <code>.class</code> を <code>.jar</code> に固めて行うのが良いでしょう。
まず、先と同じ用に <code>Main.java</code> をコンパイルします。</p>
<p>次に JAR を作成します。</p>
<pre><code>jar <ruby>cfe app.jar<rt>出力</rt></ruby> <ruby>com.example.app.Main<rt>エントリポイント</rt></ruby> <ruby>-C out-app .<rt>jar 化範囲</rt></ruby></code></pre>
<p>こうして作成した <code>app.jar</code> は次のように実行できます。</p>
<pre><code>java <ruby>-jar app.jar<rt>実行する jar</rt></ruby></code></pre>

      </div>
    </main>
    <footer>&copy; Sinotcaの雑記帳. All rights reserved.</footer>
  </body>
</html>
